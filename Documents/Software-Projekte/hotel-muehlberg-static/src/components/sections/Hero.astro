---
interface Props {
  tagline?: string;
  title?: string;
  titleLine2?: string;
  subtitle?: string;
  ctaPrimary?: string;
  ctaSecondary?: string;
  ctaPrimaryHref?: string;
  ctaSecondaryHref?: string;
  imageSrc?: string;
}

const {
  tagline = 'Willkommen im Spreewald',
  title = 'Hotel & Camping',
  titleLine2 = 'mit Leidenschaft',
  subtitle = 'Familiengeführt seit über 30 Jahren mitten in Lübbenau – der ideale Ausgangspunkt für Kahnfahrten, Radtouren und unvergessliche Feiern im Biosphärenreservat Spreewald.',
  ctaPrimary = 'Jetzt anfragen',
  ctaSecondary = 'Mehr erfahren',
  ctaPrimaryHref = '/kontakt',
  ctaSecondaryHref = '/hotel',
  imageSrc = '/images/bild-01.jpg',
} = Astro.props;
---

<section
  class="relative min-h-[92vh] flex items-end overflow-hidden bg-[var(--color-brown-900)]"
  aria-label="Hero"
>
  <!-- Background image (parallax) -->
  <div class="absolute inset-0 overflow-hidden" aria-hidden="true">
    <img
      id="hero-parallax"
      src={imageSrc}
      alt=""
      class="w-full object-cover opacity-65 will-change-transform"
      style="height: 120%; top: -10%; position: absolute; left: 0;"
      fetchpriority="high"
      decoding="async"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-[#2a1c10]/95 via-[#2a1c10]/50 to-[#2a1c10]/10"></div>
    <div class="absolute inset-x-0 bottom-0 h-[70%] bg-gradient-to-t from-[#2a1c10]/80 to-transparent md:hidden"></div>
    <div class="absolute inset-0 bg-gradient-to-r from-[#2a1c10]/40 to-transparent hidden md:block"></div>
  </div>

  <!-- Content -->
  <div class="container-hotel relative z-10 pb-20 pt-32 w-full">
    <div class="max-w-2xl hero-content">

      {tagline && (
        <p class="font-script text-[var(--color-gold-300)] text-3xl md:text-4xl mb-3 leading-none hero-tagline" aria-hidden="true">
          {tagline}
        </p>
      )}

      <h1 class="font-display text-4xl md:text-5xl lg:text-6xl font-semibold text-white leading-[1.1] mb-6 hero-title">
        {title}
        {titleLine2 && <span class="block">{titleLine2}</span>}
      </h1>

      <p class="text-base md:text-lg text-white/70 leading-relaxed mb-10 max-w-xl hero-subtitle">
        {subtitle}
      </p>

      <div class="flex flex-wrap gap-3 hero-cta">
        <a
          href={ctaPrimaryHref}
          class="inline-flex items-center gap-2 px-7 py-3.5 bg-[var(--color-gold-500)] hover:bg-[var(--color-gold-600)] text-white text-xs font-medium tracking-[0.12em] uppercase transition-colors"
        >
          {ctaPrimary}
        </a>
        <a
          href={ctaSecondaryHref}
          class="inline-flex items-center gap-2 px-7 py-3.5 text-xs font-medium tracking-[0.12em] uppercase text-white/80 border border-white/25 hover:border-white/50 hover:text-white transition-colors"
        >
          {ctaSecondary}
        </a>
      </div>

      <!-- Trust bar -->
      <div class="mt-12 pt-8 border-t border-white/10 hero-trustbar">
        <div class="flex flex-col md:flex-row md:items-center md:gap-6 gap-2 text-white/60 text-xs tracking-[0.14em] uppercase">
          <span>Familiengeführt</span>
          <span class="hidden md:inline text-white/25">·</span>
          <span>Camping & Restaurant</span>
          <span class="hidden md:inline text-white/25">·</span>
          <span>Spreewald</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll chevron -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10" aria-hidden="true">
    <svg class="w-5 h-5 text-white/30 animate-bounce" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
    </svg>
  </div>
</section>

<style>
  @media (prefers-reduced-motion: no-preference) {
    .hero-tagline {
      opacity: 0;
      animation: heroFade 1s ease forwards 0.15s;
    }
    .hero-title {
      opacity: 0;
      animation: heroFade 1s ease forwards 0.35s;
    }
    .hero-subtitle {
      opacity: 0;
      animation: heroFade 1s ease forwards 0.55s;
    }
    .hero-cta {
      opacity: 0;
      animation: heroFade 0.9s ease forwards 0.75s;
    }
    .hero-trustbar {
      opacity: 0;
      animation: heroFade 1s ease forwards 1s;
    }
  }

  @keyframes heroFade {
    to { opacity: 1; }
  }
</style>

<script>
  const img = document.getElementById('hero-parallax') as HTMLElement | null;
  if (img && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    let ticking = false;
    const RATE = 0.3;

    const update = () => {
      const y = window.scrollY * RATE;
      img.style.transform = `translateY(${y}px)`;
      ticking = false;
    };

    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(update);
        ticking = true;
      }
    }, { passive: true });
  }
</script>
