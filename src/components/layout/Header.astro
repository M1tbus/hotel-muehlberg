---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navLinks = [
  { label: 'Hotel',       href: '/hotel' },
  { label: 'Camping',     href: '/camping' },
  { label: 'Jagdstube',   href: '/restaurant' },
  { label: 'Spreewald',   href: '/spreewald' },
  { label: 'Kontakt',     href: '/kontakt' },
  { label: 'Karriere',    href: '/karriere' },
];
---

<header
  class="sticky top-0 z-50 bg-white/98 backdrop-blur-sm border-b border-[var(--color-border)]"
  role="banner"
>
  <div class="container-hotel">
    <div class="flex items-center justify-between h-16 md:h-[4.5rem]">

      <!-- Logo / Wordmark -->
      <a
        href="/"
        class="flex items-center gap-3 group"
        aria-label="Hotel & Pension Am Mühlberg – Zur Startseite"
      >
        <div
          class="w-10 h-10 flex items-center justify-center border border-[var(--color-brown-300)] text-[var(--color-brown-700)]"
          aria-hidden="true"
        >
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M10.5 22 L11.5 14 L12.5 14 L13.5 22" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="13.5" r="1.2" fill="currentColor"/>
            <path d="M12 13.5 L7 7 L10.5 12.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 13.5 L17 7 L13.5 12.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 13.5 L17 20 L13.5 14.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 13.5 L7 20 L10.5 14.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9 22 L15 22" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <span class="block text-xs tracking-[0.18em] uppercase text-[var(--color-text-muted)] leading-none mb-0.5">Hotel & Pension</span>
          <span class="block font-display text-lg font-semibold text-[var(--color-brown-900)] leading-none tracking-wide">Am Mühlberg</span>
        </div>
      </a>

      <!-- Desktop Navigation -->
      <nav
        class="hidden md:flex items-center gap-6"
        role="navigation"
        aria-label="Hauptnavigation"
      >
        {navLinks.map(({ label, href }) => {
          const isActive = currentPath === href || currentPath === href + '/';
          return (
            <a
              href={href}
              class:list={[
                'text-sm font-medium tracking-wide transition-colors relative pb-0.5',
                isActive
                  ? 'text-[var(--color-brown-800)] after:absolute after:bottom-0 after:left-0 after:right-0 after:h-px after:bg-[var(--color-gold-500)]'
                  : 'text-[var(--color-text-muted)] hover:text-[var(--color-brown-800)]',
              ]}
              aria-current={isActive ? 'page' : undefined}
            >
              {label}
            </a>
          );
        })}
      </nav>

      <!-- Right: CTA + Mobile button -->
      <div class="flex items-center gap-3">
        <!-- CTA (desktop) -->
        <a
          href="/kontakt"
          class="hidden md:inline-flex items-center gap-1.5 px-4 py-2 bg-[var(--color-gold-500)] hover:bg-[var(--color-gold-600)] text-white text-xs font-medium tracking-[0.1em] uppercase transition-colors"
        >
          Anfragen
        </a>

        <!-- Mobile hamburger -->
        <button
          id="mobile-menu-btn"
          type="button"
          class="md:hidden p-2 text-[var(--color-brown-700)] hover:text-[var(--color-brown-900)]"
          aria-expanded="false"
          aria-controls="mobile-menu"
          aria-label="Menü öffnen"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="md:hidden hidden border-t border-[var(--color-border)] bg-white"
    role="navigation"
    aria-label="Mobile Navigation"
  >
    <nav class="container-hotel py-5 flex flex-col gap-0.5">
      {navLinks.map(({ label, href }) => {
        const isActive = currentPath === href || currentPath === href + '/';
        return (
          <a
            href={href}
            class:list={[
              'px-2 py-3 text-sm font-medium border-b border-[var(--color-border)] last:border-0',
              isActive
                ? 'text-[var(--color-brown-900)]'
                : 'text-[var(--color-text-muted)] hover:text-[var(--color-brown-800)]',
            ]}
            aria-current={isActive ? 'page' : undefined}
          >
            {label}
          </a>
        );
      })}
      <a
        href="/kontakt"
        class="mt-4 btn-primary text-center text-xs"
      >
        Anfragen
      </a>
    </nav>
  </div>
</header>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  if (btn && menu) {
    btn.addEventListener('click', () => {
      const isOpen = menu.classList.toggle('hidden');
      btn.setAttribute('aria-expanded', String(!isOpen));
    });
  }
</script>
